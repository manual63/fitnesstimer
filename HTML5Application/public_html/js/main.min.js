var Home=Backbone.Model.extend({urlRoot:"data/home.json",defaults:{title:"",description:""},initialize:function(){}}),Timer=Backbone.Model.extend({urlRoot:"data/timer.json",defaults:{title:"",description:""},initialize:function(){}}),HomeView=Backbone.View.extend({el:"#content",events:{"click #timerView":"goToTimer"},render:function(a){var b=homeTemplate(a.toJSON());this.$el.html(b)},goToTimer:function(){app_router.navigate("timer",{trigger:!0})}}),TimerView=Backbone.View.extend({startTime:1,data:null,startIndex:0,timerInterval:null,el:"#content",events:{"change #classFormat":"initTimer","click .start-pretimer":"preTimer","click .stop-timer":"stopTimer"},render:function(a){var b=timerTemplate(a.toJSON());this.$el.html(b)},initTimer:function(){var a=this,b=$("#classFormat").val();console.log(b),"none"!==b?$.getJSON("classes/"+b+".json",function(b){console.log(b),a.data=b,$(".next-move").html(a.data.moves[0].type+" - "+a.data.moves[0].name)}):$(".next-move").html("No Format Selected")},preTimer:function(){var a=this;this.timerInterval=setInterval(function(){a.updatePretimer()},1e3)},startTimer:function(){var a=this;this.timerInterval=setInterval(function(){a.nextMove()},1e3)},stopTimer:function(){clearInterval(this.timerInterval)},nextMove:function(){that=this,$(".timer").html(this.startTime++),51===this.startTime&&(that.startIndex++,that.startIndex<that.data.moves.length&&($(".next-move").html(that.data.moves[that.startIndex].type+" - "+that.data.moves[that.startIndex].name),$(".next-move").addClass("blink_me"))),61===this.startTime&&(that.startTime=1,$(".next-move").removeClass("blink_me"))},updatePretimer:function(){var a=this;$(".timer").html(this.startTime++),this.startTime>21&&(a.startTime=1,clearInterval(a.timerInterval),$(".timer").html(a.startTime),a.startTimer(),$(".start-pretimer").addClass(".start-timer").removeClass(".start-pretimer"),$(".start-timer").on("click",function(){a.startTimer()}))},getClassFormat:function(){var a=this,b=$("#classFormat").val();console.log(b),"none"!==b?$.getJSON("classes/"+b+".json",function(b){console.log(b),a.data=b,$(".next-move").html(a.data.moves[0].type+" - "+a.data.moves[0].name)}):$(".next-move").html("No Format Selected")}}),AppRouter=Backbone.Router.extend({routes:{"timer*params":"timerView","*params":"homeView"},timerView:function(){Global.functions.clearView();var a=new Timer;a.fetch({success:function(a){var b=new TimerView;b.render(a)}})},homeView:function(){Global.functions.clearView();var a=new Home;a.fetch({success:function(a){var b=new HomeView;b.render(a)}})}}),Global={functions:{clearView:function(){$("#content").html("")},highlightNav:function(a){$("nav ul li a").removeClass("active"),$(a).addClass("active")}}},homeTemplate=null;$(function(){var a=$("#home-template").html();homeTemplate=Handlebars.compile(a);var a=$("#timer-template").html();timerTemplate=Handlebars.compile(a)});var app_router=new AppRouter;Backbone.history.start();var classFormat=null;null===classFormat&&(classFormat={}),$(function(){$(".start-pretimer").on("click",function(){fitnesstimer.preTimer()}),$(".stop-timer").on("click",function(){fitnesstimer.stopTimer()}),$("#classFormat").on("change",function(){fitnesstimer.getClassFormat()})});var fitnesstimer={};fitnesstimer.starttime=1,fitnesstimer.data,fitnesstimer.startIndex=0,fitnesstimer.timer,fitnesstimer.nextMove=function(){$(".timer").html(fitnesstimer.starttime++),51===fitnesstimer.starttime&&(fitnesstimer.startIndex++,fitnesstimer.startIndex<fitnesstimer.data.moves.length&&($(".next-move").html(fitnesstimer.data.moves[fitnesstimer.startIndex].type+" - "+fitnesstimer.data.moves[fitnesstimer.startIndex].name),$(".next-move").addClass("blink_me"))),61===fitnesstimer.starttime&&(fitnesstimer.starttime=1,$(".next-move").removeClass("blink_me"))},fitnesstimer.preTimer=function(){fitnesstimer.timer=setInterval("fitnesstimer.updatePretimer()",1e3)},fitnesstimer.updatePretimer=function(){$(".timer").html(fitnesstimer.starttime++),fitnesstimer.starttime>21&&(fitnesstimer.starttime=1,clearInterval(fitnesstimer.timer),$(".timer").html(fitnesstimer.starttime),fitnesstimer.startTimer(),$(".start-pretimer").addClass(".start-timer").removeClass(".start-pretimer"),$(".start-timer").on("click",function(){fitnesstimer.startTimer()}))},fitnesstimer.startTimer=function(){fitnesstimer.timer=setInterval("fitnesstimer.nextMove()",1e3)},fitnesstimer.stopTimer=function(){clearInterval(fitnesstimer.timer)},fitnesstimer.getClassFormat=function(){var a=$("#classFormat").val();console.log(a),"none"!==a?$.getJSON("classes/"+a+".json",function(a){console.log(a),fitnesstimer.data=a,$(".next-move").html(fitnesstimer.data.moves[0].type+" - "+fitnesstimer.data.moves[0].name)}):$(".next-move").html("No Format Selected")};