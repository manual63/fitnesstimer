var Home=Backbone.Model.extend({urlRoot:"data/home.json",defaults:{title:"",description:""},initialize:function(){}}),Timer=Backbone.Model.extend({urlRoot:"data/timer.json",defaults:{title:"",description:""},initialize:function(){}}),HomeView=Backbone.View.extend({el:"#content",events:{"click #timerView":"goToTimer"},render:function(a){var b=homeTemplate(a.toJSON());this.$el.html(b)},goToTimer:function(){app_router.navigate("timer",{trigger:!0})}}),TimerView=Backbone.View.extend({startTime:1,data:null,startIndex:0,timerInterval:null,el:"#content",events:{"change #classFormat":"initTimer","click .start-pretimer":"preTimer","click .stop-timer":"stopTimer"},render:function(a){var b=timerTemplate(a.toJSON());this.$el.html(b)},initTimer:function(){var a=this,b=$("#classFormat").val();console.log(b),"none"!==b?$.getJSON("classes/"+b+".json",function(b){console.log(b),a.data=b,$(".next-move").html(a.data.moves[0].type+" - "+a.data.moves[0].name)}):$(".next-move").html("No Format Selected")},preTimer:function(){var a=this;this.timerInterval=setInterval(function(){a.updatePretimer()},1e3)},startTimer:function(){var a=this;this.timerInterval=setInterval(function(){a.nextMove()},1e3)},stopTimer:function(){clearInterval(this.timerInterval)},nextMove:function(){that=this,$(".timer").html(this.startTime++),51===this.startTime&&(that.startIndex++,that.startIndex<that.data.moves.length&&($(".next-move").html(that.data.moves[that.startIndex].type+" - "+that.data.moves[that.startIndex].name),$(".next-move").addClass("blink_me"))),61===this.startTime&&(that.startTime=1,$(".next-move").removeClass("blink_me"))},updatePretimer:function(){var a=this;$(".timer").html(this.startTime++),this.startTime>21&&(a.startTime=1,clearInterval(a.timerInterval),$(".timer").html(a.startTime),a.startTimer(),$(".start-pretimer").addClass(".start-timer").removeClass(".start-pretimer"),$(".start-timer").on("click",function(){a.startTimer()}))},getClassFormat:function(){var a=this,b=$("#classFormat").val();console.log(b),"none"!==b?$.getJSON("classes/"+b+".json",function(b){console.log(b),a.data=b,$(".next-move").html(a.data.moves[0].type+" - "+a.data.moves[0].name)}):$(".next-move").html("No Format Selected")}}),AppRouter=Backbone.Router.extend({routes:{"timer*params":"timerView","*params":"homeView"},timerView:function(){Global.functions.clearView();var a=new Timer;a.fetch({success:function(a){var b=new TimerView;b.render(a)}})},homeView:function(){Global.functions.clearView();var a=new Home;a.fetch({success:function(a){var b=new HomeView;b.render(a)}})}}),Global={functions:{clearView:function(){$("#content").html("")},highlightNav:function(a){$("nav ul li a").removeClass("active"),$(a).addClass("active")},getTemplate:function(a){var b=null;return $.ajax({type:"GET",url:"templates/"+a,async:!1,cache:!1}).done(function(a){b=a}),b}}},homeTemplate=null;$(function(){var a=Global.functions.getTemplate("home.html");homeTemplate=Handlebars.compile(a);var a=Global.functions.getTemplate("timer.html");timerTemplate=Handlebars.compile(a)});var app_router=new AppRouter;Backbone.history.start();